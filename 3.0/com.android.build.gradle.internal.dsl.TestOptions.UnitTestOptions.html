<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>UnitTestOptions - Android Plugin 3.0.0-dev DSL Reference</title><link type="text/css" rel="stylesheet" href="base.css"><link type="text/css" rel="stylesheet" href="docs.css"><link type="text/css" rel="stylesheet" href="dsl.css"><meta content="DocBook XSL Stylesheets V1.75.2" name="generator"><link rel="home" href="index.html" title="Android Plugin 3.0.0-dev DSL Reference"><link rel="up" href="index.html" title="Android Plugin 3.0.0-dev DSL Reference"><link rel="prev" href="com.android.build.gradle.internal.dsl.TestOptions.html" title="TestOptions - Android Plugin 3.0.0-dev DSL Reference"><link rel="next" href="com.android.build.api.variant.VariantFilter.html" title="VariantFilter - Android Plugin 3.0.0-dev DSL Reference"></head><body><div class="sidebar"><ul><li><a xmlns:xslthl="http://xslthl.sf.net" href="index.html" title="Android Plugin 3.0.0-dev DSL Reference">Home</a></li><li class="sidebarHeading selected">UnitTestOptions</li><ul class="sections"><li><a xmlns:xslthl="http://xslthl.sf.net" href="com.android.build.gradle.internal.dsl.TestOptions.UnitTestOptions.html#N140DC" title="Properties">Properties</a></li><li><a xmlns:xslthl="http://xslthl.sf.net" href="com.android.build.gradle.internal.dsl.TestOptions.UnitTestOptions.html#N140FA" title="Methods">Methods</a></li></ul><li class="sidebarHeading">Extension types</li><li><a class="link" href="com.android.build.gradle.AppExtension.html"><code class="literal">AppExtension</code></a></li><li><a class="link" href="com.android.build.gradle.LibraryExtension.html"><code class="literal">LibraryExtension</code></a></li><li><a class="link" href="com.android.build.gradle.TestExtension.html"><code class="literal">TestExtension</code></a></li><li><a class="link" href="com.android.build.gradle.FeatureExtension.html"><code class="literal">FeatureExtension</code></a></li><li class="sidebarHeading">Configuration blocks</li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:aaptOptions(org.gradle.api.Action)"><code class="literal">aaptOptions { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:adbOptions(org.gradle.api.Action)"><code class="literal">adbOptions { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:buildTypes(org.gradle.api.Action)"><code class="literal">buildTypes { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:compileOptions(org.gradle.api.Action)"><code class="literal">compileOptions { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:dataBinding(org.gradle.api.Action)"><code class="literal">dataBinding { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:defaultConfig(org.gradle.api.Action)"><code class="literal">defaultConfig { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:dexOptions(org.gradle.api.Action)"><code class="literal">dexOptions { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:externalNativeBuild(org.gradle.api.Action)"><code class="literal">externalNativeBuild { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:jacoco(org.gradle.api.Action)"><code class="literal">jacoco { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:lintOptions(org.gradle.api.Action)"><code class="literal">lintOptions { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:packagingOptions(org.gradle.api.Action)"><code class="literal">packagingOptions { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:productFlavors(org.gradle.api.Action)"><code class="literal">productFlavors { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:signingConfigs(org.gradle.api.Action)"><code class="literal">signingConfigs { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:sourceSets(org.gradle.api.Action)"><code class="literal">sourceSets { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:splits(org.gradle.api.Action)"><code class="literal">splits { }</code></a></li><li><a class="link" href="com.android.build.gradle.BaseExtension.html#com.android.build.gradle.BaseExtension:testOptions(org.gradle.api.Action)"><code class="literal">testOptions { }</code></a></li></ul></div><div class="content"><div class="chapter"><div class="titlepage"><div><div><h1 xmlns:xslthl="http://xslthl.sf.net"><a name="com.android.build.gradle.internal.dsl.TestOptions.UnitTestOptions"></a>UnitTestOptions</h1></div></div></div><p>Options for controlling unit tests execution.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N140DC"></a>Properties</h3></div></div></div><div xmlns:xslthl="http://xslthl.sf.net" class="table"><div class="table-contents"><table id="N140DF"><thead><tr><td>Property</td><td>Description</td></tr></thead><tr><td><a class="link" href="com.android.build.gradle.internal.dsl.TestOptions.UnitTestOptions.html#com.android.build.gradle.internal.dsl.TestOptions.UnitTestOptions:includeAndroidResources"><code class="literal">includeAndroidResources</code></a></td><td><p>Enables unit tests to use Android resources, assets, and manifests.

</p></td></tr><tr><td><a class="link" href="com.android.build.gradle.internal.dsl.TestOptions.UnitTestOptions.html#com.android.build.gradle.internal.dsl.TestOptions.UnitTestOptions:returnDefaultValues"><code class="literal">returnDefaultValues</code></a></td><td><p>Whether unmocked methods from android.jar should throw exceptions or return default
values (i.e. zero or null).

</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N140FA"></a>Methods</h3></div></div></div><div xmlns:xslthl="http://xslthl.sf.net" class="table"><div class="table-contents"><table id="N140FD"><thead><tr><td>Method</td><td>Description</td></tr></thead><tr><td><code class="literal"><a class="link" href="com.android.build.gradle.internal.dsl.TestOptions.UnitTestOptions.html#com.android.build.gradle.internal.dsl.TestOptions.UnitTestOptions:all(groovy.lang.Closure)">all</a>(configClosure)</code></td><td><p>Configures all unit testing tasks.

</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N14110"></a>Script blocks</h3></div></div></div><p>No script blocks</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N14115"></a>Property details</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="signature"><a name="com.android.build.gradle.internal.dsl.TestOptions.UnitTestOptions:includeAndroidResources"></a><code class="classname">boolean</code> <code class="literal">includeAndroidResources</code></h4></div></div></div><p>Enables unit tests to use Android resources, assets, and manifests.

</p><p>If you set this property to <code class="literal">true</code>, the plugin performs resource, asset,
and manifest merging before running your unit tests. Your tests can then inspect a file
called <code class="literal">com/android/tools/test_config.properties</code> on the classpath, which is a Java
properties file with the following keys:

</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">android_sdk_home</code>: the absolute path to the Android SDK.
  </li><li class="listitem"><code class="literal">android_merged_resources</code>: the absolute path to the merged resources
      directory, which contains all the resources from this subproject and all its
      dependencies.
  </li><li class="listitem"><code class="literal">android_merged_assets</code>: the absolute path to the merged assets
      directory. For app subprojects, the merged assets directory contains assets from
      this subproject and its dependencies. For library subprojects, the merged assets
      directory contains only the assets from this subproject.
  </li><li class="listitem"><code class="literal">android_merged_manifest</code>: the absolute path to the merged manifest
      file. Only app subprojects merge manifests of its dependencies. So, library
      subprojects won't include manifest components from their dependencies.
  </li><li class="listitem"><code class="literal">android_custom_package</code>: the package name of the final R class. If you
      modify the application ID in your build scripts, this package name may not match
      the <code class="literal">package</code> attribute in the final app manifest.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="signature"><a name="com.android.build.gradle.internal.dsl.TestOptions.UnitTestOptions:returnDefaultValues"></a><code class="classname">boolean</code> <code class="literal">returnDefaultValues</code></h4></div></div></div><p>Whether unmocked methods from android.jar should throw exceptions or return default
values (i.e. zero or null).

</p><p>See <a class="ulink" href="https://developer.android.com/studio/test/index.html" target="_top">Test Your App</a>
for details.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N14154"></a>Method details</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="signature"><a name="com.android.build.gradle.internal.dsl.TestOptions.UnitTestOptions:all(groovy.lang.Closure)"></a><code class="classname">void</code> <code class="literal">all</code>(<code class="classname"><a class="ulink" href="http://groovy.codehaus.org/gapi/groovy/lang/Closure.html" target="_top"><code class="classname">Closure</code></a>&lt;<a class="ulink" href="http://gradle.org/docs/current/javadoc/org/gradle/api/tasks/testing/Test.html" target="_top"><code class="classname">Test</code></a>&gt;</code> configClosure)</h4></div></div></div><p>Configures all unit testing tasks.

</p><p>See <a class="ulink" href="http://gradle.org/docs/current/javadoc/org/gradle/api/tasks/testing/Test.html" target="_top"><code class="classname">Test</code></a> for available options.

</p><p>Inside the closure you can check the name of the task to configure only some test
tasks, e.g.

</p><pre class="programlisting">android {
    testOptions {
        unitTests.all {
            <span xmlns:xslthl="http://xslthl.sf.net" class="hl-keyword">if</span> (it.name == <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'testDebug'</span>) {
                systemProperty <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'debug'</span>, <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'true'</span>
            }
        }
    }
}</pre></div></div></div><div id="copyright">
                       Except as noted, this content is licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0</a>.
                       For details and restrictions, see the <a href="http://developer.android.com/license.html">Content License</a>.
                   </div></div></body></html>